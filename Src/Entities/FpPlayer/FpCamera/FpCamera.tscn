[gd_scene load_steps=10 format=3 uid="uid://hdkw7k5hewjh"]

[ext_resource type="Script" path="res://Src/Entities/FpPlayer/FpCamera/FpCamera.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://cvxonb5tocae2" path="res://Scenes/SteampunkAuto.tscn" id="3_4hvf1"]
[ext_resource type="Resource" uid="uid://drshxeok51cqa" path="res://Src/Entities/FpPlayer/Weapons/Resources/tier1.tres" id="3_52krc"]
[ext_resource type="Resource" uid="uid://bsqubahyvfbw1" path="res://Src/Entities/FpPlayer/Weapons/Resources/tier2.tres" id="4_8esu4"]
[ext_resource type="Script" path="res://Src/Entities/FpPlayer/Weapons/WeaponManager.gd" id="4_jhbsu"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3x30e"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_32mks"]
direction = Vector3(1, 0, -3)
spread = 13.29
gravity = Vector3(0, 3, 0)
initial_velocity_min = 1.0
initial_velocity_max = 3.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6wyi7"]
transparency = 1
vertex_color_use_as_albedo = true
albedo_color = Color(0.854902, 0.454902, 0.121569, 1)
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="QuadMesh" id="QuadMesh_37lnv"]
material = SubResource("StandardMaterial3D_6wyi7")

[node name="FpCamera" type="Marker3D"]
script = ExtResource("1")

[node name="H" type="Node3D" parent="."]

[node name="V" type="Node3D" parent="H"]

[node name="Camera3D" type="Camera3D" parent="H/V"]
current = true
fov = 80.0
far = 1000.0

[node name="ShotGunRays" type="Node3D" parent="H/V/Camera3D"]

[node name="AimRay2" type="RayCast3D" parent="H/V/Camera3D/ShotGunRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRay3" type="RayCast3D" parent="H/V/Camera3D/ShotGunRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRay4" type="RayCast3D" parent="H/V/Camera3D/ShotGunRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRay5" type="RayCast3D" parent="H/V/Camera3D/ShotGunRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRay6" type="RayCast3D" parent="H/V/Camera3D/ShotGunRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRay7" type="RayCast3D" parent="H/V/Camera3D/ShotGunRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRay8" type="RayCast3D" parent="H/V/Camera3D/ShotGunRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRay" type="RayCast3D" parent="H/V/Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)
target_position = Vector3(0, 0, -100)
collision_mask = 2
collide_with_areas = true

[node name="AimRayEnd" type="Node3D" parent="H/V/Camera3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -101.5)

[node name="WeaponManager" type="Node3D" parent="H/V/Camera3D" node_paths=PackedStringArray("Animation_Player")]
script = ExtResource("4_jhbsu")
Animation_Player = NodePath("Weapons/AnimationPlayer")
weapon_resources = Array[Resource("res://Src/Entities/FpPlayer/Weapons/WeaponResource.gd")]([ExtResource("3_52krc"), ExtResource("4_8esu4")])
weapon_tier_prices = Array[int]([0, 200])

[node name="Weapons" type="Node3D" parent="H/V/Camera3D/WeaponManager"]

[node name="AnimationPlayer" type="AnimationPlayer" parent="H/V/Camera3D/WeaponManager/Weapons"]

[node name="Tier1" parent="H/V/Camera3D/WeaponManager/Weapons" instance=ExtResource("3_4hvf1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.197073, -0.287, -0.182347)

[node name="FlameThrower" type="Area3D" parent="H/V/Camera3D/WeaponManager/Weapons"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0, 0.40891)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="H/V/Camera3D/WeaponManager/Weapons/FlameThrower"]
transform = Transform3D(1, 0, 0, 0, 0.00233872, -0.999997, 0, 0.999997, 0.00233872, 0, 0, -1.745)
shape = SubResource("CapsuleShape3D_3x30e")

[node name="FlameParticles" type="GPUParticles3D" parent="H/V/Camera3D/WeaponManager/Weapons"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.20693, -0.171697, -1.25883)
emitting = false
amount = 200
lifetime = 0.5
randomness = 1.0
visibility_aabb = AABB(-0.955916, -0.702997, -1.9664, 1.91183, 1.40599, 3.93279)
process_material = SubResource("ParticleProcessMaterial_32mks")
draw_pass_1 = SubResource("QuadMesh_37lnv")
